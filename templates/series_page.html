{% extends "base.html" %}

{% block body %}


<div class="row">
    <div class="col-md-8">
        <img class="img-responsive series-fanart" src="{{series.fanart}}">
    </div>
     <div class ="col-md-4">
        <h2 class='series-title'>{{series.title}}</h2>
        <p class="series-overview">{{series.overview}}</p>

    </div>

</div>

<hr>

<div class = "row">
    
     <div class="user-buttons col-md-6">
        <div class="btn-group" data-toggle="buttons">
          <label class="btn btn-default" id="watching">
            <input type="radio"  value="option1">
            Currently Watching
          </label>
          <label class="btn btn-default" id="watched">
            <input type="radio"  value="option2">
            Watched
          </label>
          <label class="btn btn-default">
            <input type="radio"  id="to-watch" value="option3">
            Want to Watch
          </label>
          <button type="button" class="btn btn-default" id="favorite">Favorite</button>
        </div>

        
    
    </div>
</div>


    </div>

    <div class="season-buttons col-md-6">
        <div class="btn-toolbar" role="toolbar" style="margin: 0">
            <div class="btn-group">
                <button type="button" class="btn btn-default">1</button>
            </div>
        </div>
    </div>

</div>


<div class="row col-md-12">
    <div class="col-md-6"></div>
    <div class="episodes-table col-md-6">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Episode Title</th>
                    <th>Watched</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Pilot</td>
                    <td>
                        <button type="button" class="btn btn-default btn-sm">
                            <span class="glyphicon glyphicon-ok"></span>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Blood Moon</td>
                    <td><span class="glyphicon glyphicon-ok"></span></td>
                </tr>
            </tbody>
        </table>

    </div>

</div>


<!-- <div class="btn-group" data-toggle="buttons" style="margin: 9px 0 5px;">
    <button type="radio" class="btn btn-default" id="watching option1">Currently Watching</button>
    <button type="radio" class="btn btn-default" id="watched option2">Watched</button>
    <button type="radio" class="btn btn-default" id="to-watch option3">Want to Watch</button>
    <button type="button" class="btn btn-default" id="favorite">Favorite</button>
</div> -->





<script type="text/javascript">

    $('.btn-group').button()

    if ("{{state}}" == "watching") {
        $("#watching").button('toggle');
        console.log('test')
    };

    if ("{{state}}" == "watched") {
       $("#watched").button('toggle');
    };

    if ("{{state}}" == "to-watch") {
        $("#to-watch > input").prop('checked',true);
    };


    $('#watched').click(function(e) {
        console.log('link clicked!');
        var seriesId = {{series.id}};
        var userId = {{current_user.id}};
        var state = 'watched';
        $.post("/add-user-series", {series_id:seriesId, user_id:userId, state:state});

    });

    $('#watching').click(function(e) {
        console.log('link clicked!');
        var seriesId = {{series.id}};
        var userId = {{current_user.id}};
        var state = 'watching';
        $.post("/add-user-series", {series_id:seriesId, user_id:userId, state:state});

    });

    $('#to-watch').click(function(e) {
        console.log('link clicked!');
        var seriesId = {{series.id}};
        var userId = {{current_user.id}};
        var state = 'to-watch';
        $.post("/add-user-series", {series_id:seriesId, user_id:userId, state:state});

    });

    $('#favorite').click(function(e) {
        console.log('link clicked!');
        var seriesId = {{series.id}};
        var userId = {{current_user.id}};
        $.post("/add-fav-series", {series_id:seriesId, user_id:userId});

    });


</script>
{% endblock %}
